(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{309:function(t,e,r){"use strict";r.r(e);var n=r(28),o=(r(70),r(19),r(11),r(104),r(20),r(35),r(105),r(43),r(38),r(291)),c=(r(207),{data:function(){return{listSupplier:[],qrid:{},org:{},qrpackage:{},listQRTask:[],listQRRequest:[],loading:!0,staffUser:null,swiperOptions:{slidesPerView:1,spaceBetween:30,speed:2e3,autoplay:{delay:3e3},pagination:{el:".swiper-pagination",dynamicBullets:!0}}}},components:{Swiper:o.Swiper,SwiperSlide:o.SwiperSlide},methods:{formatPrice:function(t){return(t/1).toFixed(0).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},getSrcImage:function(t){return t.imageUrls?t.imageUrls:"default-placeholder.png"},getSupplier:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/api/Organizations/");case 2:t.listSupplier=e.sent;case 3:case"end":return e.stop()}}),e)})))()},displaySupplierName:function(t){var e=this.listSupplier.find((function(e){return e.id===t}));return e&&e.fullname},displayStaffName:function(t,e){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t&&e){n.next=3;break}return n.abrupt("return",void 0);case 3:return n.next=5,r.$axios.$get("api/Organizations/"+t+"/users/"+e);case 5:return r.staffUser=n.sent,n.abrupt("return",r.staffUser.fullName);case 9:n.prev=9,n.t0=n.catch(0),console.log("error",n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},getDeviceData:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.$route.params.id,e.next=4,t.$axios.$get("/api/QRIDs/"+r,{params:{filter:{include:{relation:"history",scope:{order:"created DESC"}}}}});case 4:if(t.qrid=e.sent,console.log("%c_private.vue line:210 object","color: #007acc;",t.qrid),!(t.qrid.packageId>0)){e.next=11;break}return e.next=9,t.$axios.$get("/api/QRPackages/"+t.qrid.packageId,{params:{filter:{include:["organization"]}}});case 9:t.qrpackage=e.sent,t.org=t.qrpackage.organization;case 11:e.t0=regeneratorRuntime.keys(t.qrid.history);case 12:if((e.t1=e.t0()).done){e.next=21;break}return n=e.t1.value,o=t.qrid.history[n],e.next=17,t.displayStaffName(o.supplierOrganizationId,o.supplierStaffId);case 17:c=e.sent,o.staffName=c,e.next=12;break;case 21:t.loading=!1,e.next=27;break;case 24:e.prev=24,e.t2=e.catch(0),console.log("error",e.t2);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})))()}},created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.getDeviceData(),t.getSupplier()]);case 2:case"end":return e.stop()}}),e)})))()}}),l=r(53),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"view_main pb-5 bg-color-gray"},["QRID_STATUS.GENERATED"==t.qrid.status?r("div",[r("div",{staticClass:"container"},[r("b-jumbotron",{staticClass:"mb-3 border-radius-0 px-3 bg-white mt-3"},[r("p",{staticClass:"mb-1 fs-14 text-center text-warning font-weight-bold text-uppercase"},[r("span",{staticClass:"material-icons",staticStyle:{top:"4px",position:"relative"}},[t._v("report_problem")]),t._v("\r\n                       Thẻ chưa được kích hoạt sử dụng"),r("br"),t._v("\r\n                       Mã thẻ: "+t._s(t.qrid.id)+"\r\n                ")]),t._v(" "),r("p",{staticClass:"mb-1 fs-12 text-dark",staticStyle:{opacity:"0.7"}},[t._v("\r\n                    Để kích hoạt thẻ vui lòng liên hệ\r\n                ")]),t._v(" "),r("p",{staticClass:"mb-1 fs-14 font-weight-bold"},[t._v("\r\n                    "+t._s(t.org.fullname)+"\r\n                ")]),t._v(" "),r("p",{staticClass:"mb-1 fs-14"},[t._v("Địa chỉ: "+t._s(t.org.address))]),t._v(" "),r("p",{staticClass:"mb-1 fs-14"},[t._v("Hotline: "+t._s(t.org.hotline))])])],1)]):r("div",[r("b-jumbotron",{staticClass:"mb-3 border-radius-0 bg-gradient py-5 px-4"},[r("p",{staticClass:"mb-0 fs-16 text-white text-uppercase font-weight-bold"},[t._v("\r\n                "+t._s(t.qrid.ownerName)+"\r\n            ")]),t._v(" "),r("p",{staticClass:"mb-0 fs-14 text-white-50"},[t._v("Mã thiết bị: "+t._s(t.qrid.id))]),t._v(" "),r("p",{staticClass:"mb-0 fs-14 text-white-50"},[t._v("Địa chỉ: "+t._s(t.qrid.ownerAddress))])]),t._v(" "),r("div",{staticClass:"container text-transform"},[r("b-skeleton-wrapper",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"loading",fn:function(){return[r("b-card",{staticClass:"mb-3 box-shadow border-0"},[r("b-skeleton",{staticStyle:{width:"50%","text-align":"center",margin:"0 auto 15px auto"},attrs:{animation:"wave",width:"50%"}}),t._v(" "),r("b-skeleton",{attrs:{animation:"wave",width:"55%"}}),t._v(" "),r("b-skeleton",{attrs:{animation:"wave",width:"100%"}}),t._v(" "),r("b-skeleton",{attrs:{animation:"wave",width:"40%"}}),t._v(" "),r("b-skeleton",{staticClass:"text-center",attrs:{width:"100%",type:"button"}})],1)]},proxy:!0}])},[t._v(" "),"CARD_TYPE.SELL_PRODUCT"==t.qrid.cardType?r("b-card",{staticClass:"mb-3 box-shadow border-0"},[""!=t.org.logoUrl?r("div",{staticClass:"text-center mb-3 logo"},[r("b-img",{attrs:{src:t.org.logoUrl,fluid:"",alt:"Responsive image"}})],1):t._e(),t._v(" "),r("h6",{staticClass:"card-subtitle mb-2 fs-14",staticStyle:{color:"#ccc"}},[t._v("\r\n                        Thiết bị được cung cấp bởi\r\n                    ")]),t._v(" "),r("b-card-title",{staticClass:"mb-1 fs-14 text-justify text-uppercase text-info font-weight-bold mb-3"},[t._v("\r\n                        "+t._s(t.org.fullname)+"\r\n                    ")]),t._v(" "),r("NuxtLink",{attrs:{to:"/cua-hang/"+t.org.id}},[r("b-button",{staticClass:"w-100 fs-12",attrs:{variant:"primary"}},[t._v("THÔNG TIN CỬA HÀNG")])],1)],1):t._e()],1),t._v(" "),r("b-card",{staticClass:"mb-2 box-shadow border-0"},[t.qrid.imageUrls>0?r("div",{staticClass:"text-center mb-3"},[r("swiper",{ref:"carousel",staticClass:"swiper",attrs:{autoplay:!0,"auto-update":!0,"auto-destroy":!0,options:t.swiperOptions}},[t._l(t.qrid.imageUrls,(function(t,e){return r("swiper-slide",{key:e},[r("b-img",{staticStyle:{width:"200px",height:"200px","object-fit":"contain"},attrs:{src:t,fluid:"",alt:"Responsive image"}})],1)})),t._v(" "),r("div",{staticClass:"swiper-pagination swiper-pagination-h",attrs:{slot:"pagination"},slot:"pagination"})],2)],1):r("div",{staticClass:"text-center mb-3"},[r("b-img",{staticStyle:{width:"200px",height:"200px","object-fit":"contain"},attrs:{src:"/default-placeholder.png",fluid:"",alt:"Responsive image"}})],1),t._v(" "),r("b-card-title",{staticClass:"mb-1 fs-14 text-justify text-primary text-uppercase font-weight-bold mb-2"},[t._v("\r\n                    "+t._s(t.qrid.title)+"\r\n                ")]),t._v(" "),r("b-card-text",{staticClass:"mb-1 fs-14 text-justify text-success"},[t._v("\r\n                    Ngày kích hoạt: "+t._s(t._f("moment")(t.qrid.activatedDate,"MM-DD-YYYY h:mm"))+"\r\n                ")]),t._v(" "),r("b-card-text",{staticClass:"fs-14 text-justify"},[t._v("\r\n                    "+t._s(t.qrid.description)+"\r\n                ")])],1),t._v(" "),r("div",{staticClass:"qrTask mt-4 mb-3"},[r("h4",{staticClass:"fs-12 text-uppercase font-weight-bold mb-3"},[t._v("\r\n                    Lịch sử dịch vụ thiết bị\r\n                ")]),t._v(" "),r("div",{staticClass:"qrTaskContent"},[r("b-skeleton-wrapper",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"loading",fn:function(){return t._l(3,(function(e){return r("b-card",{key:e,staticClass:"mb-3 border-0 box-shadow"},[r("b-card-header",{staticClass:"d-flex justify-content-between bg-transparent px-3"},[r("b-skeleton",{attrs:{animation:"fade",width:"30%"}}),t._v(" "),r("b-skeleton",{attrs:{animation:"fade",width:"40%"}})],1),t._v(" "),r("b-row",{staticClass:"p-3"},[r("b-col",{staticClass:"pr-0",attrs:{cols:"3"}},[r("b-skeleton-img",{attrs:{height:"60px"}})],1),t._v(" "),r("b-col",{staticClass:"position-relative pr-4",attrs:{cols:"9"}},[r("b-skeleton",{attrs:{animation:"fade",width:"85%"}}),t._v(" "),r("b-skeleton",{attrs:{animation:"fade",width:"100%"}}),t._v(" "),r("b-skeleton",{attrs:{animation:"fade",width:"70%"}})],1)],1)],1)}))},proxy:!0}])},[t._v(" "),t._l(t.qrid.history,(function(e,n){return r("b-card",{key:n,staticClass:"mb-3 border-0 box-shadow"},[r("b-card-header",{staticClass:"d-flex justify-content-between bg-transparent px-3"},["ACTIVITY.QR_REQUEST"==e.type?r("b-button",{staticClass:"fs-10 py-0 px-2 text-white",attrs:{pill:"",variant:"CONFIRMED"==e.status?"success":"warning"}},[t._v("\r\n                                    "+t._s("CONFIRMED"==e.status?"Đã tiếp nhận":"Chờ tiếp nhận")+"\r\n                                ")]):r("b-button",{staticClass:"fs-10 py-0 px-2 text-white",attrs:{pill:"",variant:"CONFIRMED"==e.status?"success":"warning"}},[t._v("\r\n                                    "+t._s("CONFIRMED"==e.status?"Đã xác nhận":"Chờ xác nhận")+"\r\n                                ")]),t._v(" "),r("b-card-text",{staticClass:"fs-14 text-warning"},[t._v(t._s(t._f("moment")(e.created,"MM-DD-YYYY h:mm")))])],1),t._v(" "),r("b-row",{staticClass:"p-3"},["ACTIVITY.QR_REQUEST"==e.type?r("b-col",{staticClass:"position-relative pr-4",attrs:{cols:"12"}},[r("NuxtLink",{attrs:{to:"/request-detail/"+t.qrid.id+"/request/"+e.id}},[r("span",{staticClass:"material-icons position-absolute next-icon text-black-50"},[t._v("\r\n                                            navigate_next\r\n                                        ")]),t._v(" "),r("b-card-title",{staticClass:"fs-12 text-uppercase mb-1 font-weight-bold text-warning"},[t._v("\r\n                                            "+t._s(e.title)+"\r\n                                        ")]),t._v(" "),r("div",{staticClass:"fs-12 text-black-50"},[t._v("Yêu cầu dịch vụ đến cửa hàng")]),t._v(" "),r("b-card-text",{staticClass:"mb-1 item-text fs-12",staticStyle:{color:"#000"}},[t._v("\r\n                                            "+t._s(t.displaySupplierName(e.supplierOrganizationId))+"\r\n                                        ")])],1)],1):r("b-col",{staticClass:"position-relative pr-4",attrs:{cols:"12"}},[r("NuxtLink",{attrs:{to:"/service-confirmation/"+t.qrid.id+"/task/"+e.id}},[r("span",{staticClass:"material-icons position-absolute next-icon text-black-50"},[t._v("\r\n                                            navigate_next\r\n                                        ")]),t._v(" "),r("b-card-title",{staticClass:"fs-12 text-uppercase mb-1 font-weight-bold text-primary"},[t._v("\r\n                                            "+t._s(e.title)+"\r\n                                        ")]),t._v(" "),r("div",{staticClass:"fs-12 text-black-50"},[t._v("Dịch vụ từ cửa hàng")]),t._v(" "),r("b-card-text",{staticClass:"mb-1 item-text fs-12",staticStyle:{color:"#000"}},[t._v("\r\n                                            "+t._s(t.displaySupplierName(e.supplierOrganizationId))+"\r\n                                        ")]),t._v(" "),r("b-card-text",{staticClass:"d-flex align-items-center mb-1 item-text fs-12",staticStyle:{color:"#000"}},[r("span",{staticClass:"mr-auto"},[t._v(t._s(e.staffName))]),t._v(" "),r("b-badge",{attrs:{variant:"primary",pill:""}},[t._v(t._s(t.formatPrice(e.money))+" VND")])],1)],1)],1)],1)],1)}))],2)],1)])],1),t._v(" "),"QRID_STATUS.ACTIVE"==t.qrid.status?r("NuxtLink",{attrs:{to:"/request/"+t.qrid.id+"/private/"+t.qrid.private}},[r("b-button",{staticClass:"btn_subport box-shadow d-flex align-items-center",attrs:{pill:"",variant:"primary"}},[r("span",{staticClass:"material-icons text-white mr-2"},[t._v(" add_circle ")]),t._v(" "),r("span",{staticClass:"fs-12 font-weight-bold text-white"},[t._v("Yêu cầu dịch vụ")])])],1):t._e()],1)])}),[],!1,null,null,null);e.default=component.exports}}]);